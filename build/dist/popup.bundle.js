(()=>{async function e(){try{const e=await chrome.runtime.sendMessage({action:"genKeys"});if(console.log("Response from background:",e),e.success){const n=`\n        <strong>Key Pair Generated!</strong><br><br>\n        Public Key Length: ${e.publicKeyLength} bytes<br>\n        <small>Public Key (base64): ${e.publicKey.substring(0,50)}...</small><br>\n\n        Secret Key Length: ${e.secretKeyLength} bytes<br><br>\n        <small>Secret Key (base64): ${e.secretKey.substring(0,50)}...</small>\n      `;document.getElementById("keyGenOutput").innerHTML=n}else document.getElementById("keyGenOutput").innerHTML=`<strong>Error:</strong> ${e.error}`}catch(e){console.error("Error:",e),document.getElementById("keyGenOutput").innerHTML=`<strong>Error:</strong> ${e.message}`}}async function n(){try{const e=await chrome.runtime.sendMessage({action:"randomNumber"});if(console.log("Response from background:",e),e.success){let n=`<p>Random Number: ${e.ranNum}</p>`;e.nHistory&&e.nHistory.length>0&&(n+="<p>Stored numbers: "+e.nHistory.join(", ")+"</p>"),document.getElementById("ranNumOut").innerHTML=n}else document.getElementById("ranNumOut").innerHTML=`<strong>Error:</strong> ${e.error}`}catch(e){console.error("Error:",e),document.getElementById("ranNumOut").innerHTML=`<strong>Error:</strong> ${e.message}`}}async function t(){try{const e=await chrome.runtime.sendMessage({action:"resetRandomNumbers"});console.log("Response from background:",e),e.success?document.getElementById("ranNumOut").innerHTML="<p>History reset.</p>":document.getElementById("ranNumOut").innerHTML=`<strong>Error:</strong> ${e.error}`}catch(e){console.error(e)}}async function o(){try{const e=document.getElementById("inData").value,n=await chrome.runtime.sendMessage({action:"encryptMessage",payload:e});console.log("Response from background:",n),n.success?(console.log("YES"),document.getElementById("outData").value=JSON.stringify(n,null,2)):console.log("NO")}catch(e){console.error(e)}}console.log("\n--- popup.js loading ---\n"),document.addEventListener("DOMContentLoaded",()=>{const r=document.getElementById("genKeysBtn");r?(r.addEventListener("click",e),console.log("Key generation button listener attached")):console.error("genKeysBtn not found in DOM");const s=document.getElementById("ranNumBtn");s?(s.addEventListener("click",n),console.log("random number button listener")):console.error("ranNumBttn not found");const c=document.getElementById("resetNumsBtn");c?(c.addEventListener("click",t),console.log("storage reset")):console.error("reset button not found");const u=document.getElementById("encBtn");u?(u.addEventListener("click",o),console.log("Encrypt button")):console.error("encrypt button not found")}),console.log("\n--- popup.js completed ---\n")})();